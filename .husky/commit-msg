#!/bin/sh

COMMIT_MSG_FILE="$1"
COMMIT_MSG="$(head -n1 "$COMMIT_MSG_FILE")"

echo "üîç Validando mensagem de commit:"
echo "    $COMMIT_MSG"

# Padr√£o esperado:
# tipo: mensagem
# tipos suportados: feat | fix | chore | docs | refactor | style | test | build | ci | perf | revert
COMMIT_REGEX='^(feat|fix|chore|docs|refactor|style|test|build|ci|perf|revert): .+'

if ! echo "$COMMIT_MSG" | grep -Eq "$COMMIT_REGEX"; then
  echo "‚ùå Mensagem de commit inv√°lida!"
  echo "‚û°Ô∏è  Padr√£o esperado:"
  echo "    tipo: descri√ß√£o"
  echo
  echo "   Exemplos v√°lidos:"
  echo "    feat: cria estrutura base do projeto"
  echo "    fix: ajusta docker-compose para subir corretamente"
  echo "    chore: adiciona husky e configs padr√£o"
  exit 1
fi

echo "‚úÖ Mensagem de commit v√°lida!"